{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAASC,SAASC,cAAc,yBAChCC,EAAkBF,SAASC,cAAc,kBACzCE,EAAYH,SAASC,cAAc,iBACnCG,EAAcJ,SAASC,cAAc,mBACrCI,EAAsBL,SAASC,cAAc,wBAEnD,IAAIK,GAAiB,EACjBC,EAAe,EAwBnB,SAASC,EAAwBC,EAAUC,EAAaC,GAtBxD,IAAuBC,EAAUC,EAuB1BP,IAIDG,EAAWC,EAEbX,EAAOe,UAAW,GA7BCF,EAiCPH,EAjCiBI,EAiCPN,EAhCjB,IAAIQ,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACJZ,IAGiBa,KAAKC,SAAW,IAEpCC,EAAAxB,GAASyB,OAAOC,QACd,uBAAqBX,QAAiBC,OAExCG,EAAQ,C,SAAEJ,E,MAAUC,MAEpBQ,EAAAxB,GAASyB,OAAOE,QACd,sBAAoBZ,QAAiBC,OAEvCI,EAAO,C,SAAEL,E,MAAUC,K,GAEpBA,EAAM,KAgBRY,MAAK,EAACb,SAAEA,EAAQC,MAAEA,MACjBa,QAAQC,IAAI,uBAAqBf,QAAiBC,MAAU,IAE7De,OAAM,EAAChB,SAAEA,EAAQC,MAAEA,MAClBa,QAAQC,IAAI,sBAAoBf,QAAeC,MAAU,IAE1DgB,SAAQ,KACPtB,GAAgBI,EAChBH,EAAwBC,EAAW,EAAGC,EAAaC,EAAU,I,CAInEZ,EAAO+B,iBAAiB,SAASC,IAC/BA,EAAMC,iBACN,MAAMC,EAAkBC,SAAShC,EAAgBiC,OAC3CxB,EAAYuB,SAAS/B,EAAUgC,OAC/BzB,EAAcwB,SAAS9B,EAAY+B,OAEzC5B,EAAe0B,EACf3B,GAAiB,EACjBP,EAAOe,UAAW,EAElBN,EAAwB,EAAGE,EAAaC,EAAU,IAGpDN,EAAoByB,iBAAiB,SAAS,KAC5CxB,GAAiB,EACjBP,EAAOe,UAAW,CAAK","sources":["src/tasks/4_timer_and_promises/js/promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst button = document.querySelector('[data-start-promises]');\nconst firstDelayInput = document.querySelector('[name=\"delay\"]');\nconst stepInput = document.querySelector('[name=\"step\"]');\nconst amountInput = document.querySelector('[name=\"amount\"]');\nconst resetPromisesButton = document.querySelector('[data-promises-stop]');\n\nlet createPromises = true;\nlet currentDelay = 0;\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (!createPromises) {\n        return;\n      }\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        Notiflix.Notify.success(\n          `✅ Fulfilled promise ${position} in ${delay}ms`\n        );\n        resolve({ position, delay });\n      } else {\n        Notiflix.Notify.failure(\n          `❌ Rejected promise ${position} in ${delay}ms`\n        );\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction createPromisesRecursive(position, amountValue, stepValue) {\n  if (!createPromises) {\n    return; // Stop creating promises\n  }\n\n  if (position > amountValue) {\n    // All promises created\n    button.disabled = false;\n    return;\n  }\n\n  createPromise(position, currentDelay)\n    .then(({ position, delay }) => {\n      console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n    })\n    .finally(() => {\n      currentDelay += stepValue;\n      createPromisesRecursive(position + 1, amountValue, stepValue);\n    });\n}\n\nbutton.addEventListener('click', event => {\n  event.preventDefault();\n  const firstDelayValue = parseInt(firstDelayInput.value);\n  const stepValue = parseInt(stepInput.value);\n  const amountValue = parseInt(amountInput.value);\n\n  currentDelay = firstDelayValue;\n  createPromises = true;\n  button.disabled = true;\n\n  createPromisesRecursive(1, amountValue, stepValue);\n});\n\nresetPromisesButton.addEventListener('click', () => {\n  createPromises = false;\n  button.disabled = false;\n});\n"],"names":["$7Y9D8","parcelRequire","$cd4087b74b46d0b0$var$button","document","querySelector","$cd4087b74b46d0b0$var$firstDelayInput","$cd4087b74b46d0b0$var$stepInput","$cd4087b74b46d0b0$var$amountInput","$cd4087b74b46d0b0$var$resetPromisesButton","$cd4087b74b46d0b0$var$createPromises","$cd4087b74b46d0b0$var$currentDelay","$cd4087b74b46d0b0$var$createPromisesRecursive","position1","amountValue","stepValue","position","delay","disabled","Promise","resolve","reject","setTimeout","Math","random","$parcel$interopDefault","Notify","success","failure","then","console","log","catch","finally","addEventListener","event","preventDefault","firstDelayValue","parseInt","value"],"version":3,"file":"timer_and_promises.24183ffe.js.map"}